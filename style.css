/* 通用样式和深色背景主题 */
body {
  margin: 0;
  font-family: "Segoe UI", "Helvetica Neue", "Arial", sans-serif;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  background-color: #1a1a1a;
  color: #e0e0e0;
  overflow: hidden;
}

.container {
  display: flex;
  flex-direction: column;
  height: 100vh;
  width: 100%;
  box-sizing: border-box;
  position: relative;
}

/* 头部语言选择区域 */
.header {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px;
  background-color: rgba(26, 26, 26, 0.75);
  z-index: 10;
  transition: transform 0.3s ease-in-out;
  border-bottom: 1px solid #333;
}

.header-hidden {
  transform: translateY(-100%);
}

.language-select {
  display: flex;
  flex-direction: column;
  flex: 1;
  margin-right: 10px;
}

.language-select:last-child {
  margin-right: 0;
}

.language-select label {
  font-size: 0.8em;
  color: #bbb;
  margin-bottom: 5px;
}

select,
.custom-select-trigger {
  background-color: #333;
  color: #e0e0e0;
  border: 1px solid #555;
  border-radius: 8px;
  padding: 8px;
  font-size: 0.9em;
  height: 38px;
  line-height: 22px;
  box-sizing: border-box;
}

select {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23e0e0e0%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%00-13%205.4L146.2%20268.3%2018.8%2075.8c-2.9-3.2-6.5-4.4-10.7-4.4C4.6%2071.4%200%2076%200%2082.2c0%204.4%201.7%207.9%204.4%2010.7l133.3%20133.3c3.2%203.2%206.5%204.4%2010.7%204.4s7.9-1.3%2010.7-4.4l133.3-133.3c2.9-2.9%204.4-6.5%204.4-10.7%200-6.2-4.6-10.7-10.7-10.7z%22%2F%3E%3C%2Fsvg%3E');
  background-repeat: no-repeat;
  background-position: right 8px center;
  background-size: 12px;
}

select:focus {
  outline: none;
  border-color: #007bff;
}

.custom-select-trigger {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

/* 聊天区域 */
.chat-area {
  flex-grow: 1;
  overflow-y: auto;
  padding: 80px 10px 150px 10px;
  /* 预留顶部和底部空间 */
  background-color: #1a1a1a;
  display: flex;
  flex-direction: column;
}

/* 消息样式 */
.message {
  padding: 8px 12px;
  margin-bottom: 8px;
  border-radius: 12px;
  max-width: 80%;
  word-wrap: break-word;
  position: relative;
  font-size: 1.1em;
}

.user-message {
  background-color: #007bff;
  color: white;
  align-self: flex-end;
  border-bottom-right-radius: 4px;
}

.ai-message {
  background-color: #333;
  color: #e0e0e0;
  align-self: flex-start;
  border-bottom-left-radius: 4px;
}

/* 消息按钮容器 */
.message-buttons {
  position: absolute;
  bottom: -8px;
  right: -8px;
  display: flex;
  gap: 5px;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.2s ease, visibility 0.2s ease;
  z-index: 10;
}

/* 鼠标悬停在消息气泡上时，显示按钮容器 */
.message:hover .message-buttons {
  opacity: 1;
  visibility: visible;
}

/* 通用按钮样式 */
.reverse-check-btn,
.copy-btn,
.edit-btn {
  width: 24px;
  height: 24px;
  padding: 0;
  border-radius: 50%;
  background-color: #555;
  cursor: pointer;
  border: none;
  transition: background-color 0.2s ease, transform 0.2s ease;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.4);
  transform: scale(0.8);
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  color: white;
  text-indent: 0;
}

/* 按钮图标通用样式 */
.copy-btn::before,
.edit-btn::before,
.reverse-check-btn::before {
  content: "";
  display: inline-block;
  width: 16px;
  height: 16px;
  background-repeat: no-repeat;
  background-position: center;
  background-size: contain;
}

/* 各按钮特定图标 */
.copy-btn::before {
  background-image: url("data:image/svg+xml;utf8,<svg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'><path fill='white' d='M11.4 22.75H7.6c-4.39 0-6.35-1.96-6.35-6.35v-3.8c0-4.39 1.96-6.35 6.35-6.35h3c.41 0 .75.34.75.75s-.34.75-.75.75h-3c-3.58 0-4.85 1.27-4.85 4.85v3.8c0 3.58 1.27 4.85 4.85 4.85h3.8c3.58 0 4.85-1.27 4.85-4.85v-3c0-.41.34-.75.75-.75s.75.34.75.75v3c0 4.39-1.96 6.35-6.35 6.35z'/><path fill='white' d='M17 14.15h-3.2c-2.81 0-3.95-1.14-3.95-3.95V7c0-.3.18-.58.46-.69.28-.12.6-.05.82.16l6.4 6.4c.21.21.28.54.16.82a.74.74 0 0 1-.69.46zm-5.65-5.34v1.39c0 1.99.46 2.45 2.45 2.45h1.39l-3.84-3.84zM15.6 2.75h-4c-.41 0-.75-.34-.75-.75s.34-.75.75-.75h4c.41 0 .75.34.75.75s-.34.75-.75.75z'/><path fill='white' d='M7 5.75c-.41 0-.75-.34-.75-.75 0-2.07 1.68-3.75 3.75-3.75h2.62c.41 0 .75.34.75.75s-.34.75-.75.75H10C8.76 2.75 7.75 3.76 7.75 5c0 .41-.34.75-.75.75zM19.19 17.75c-.41 0-.75-.34-.75-.75s.34-.75.75-.75c1.14 0 2.06-.93 2.06-2.06V8c0-.41.34-.75.75-.75s.75.34.75.75v6.19c0 1.96-1.6 3.56-3.56 3.56z'/><path fill='white' d='M22 8.75h-3c-2.66 0-3.75-1.09-3.75-3.75V2c0-.3.18-.58.46-.69.28-.12.6-.05.82.16l6 6c.21.21.28.54.16.82a.74.74 0 0 1-.69.46zm-5.25-4.94V5c0 1.83.42 2.25 2.25 2.25h1.19l-3.44-3.44z'/></svg>");
}

.edit-btn::before {
  background-image: url("data:image/svg+xml;utf8,<svg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'><path fill='white' d='M5.54 19.52c-.61 0-1.18-.21-1.59-.6-.52-.49-.77-1.23-.68-2.03l.37-3.24c.07-.61.44-1.42.87-1.86l8.21-8.69c2.05-2.17 4.19-2.23 6.36-.18s2.23 4.19.18 6.36l-8.21 8.69c-.42.45-1.2.87-1.81.97l-3.22.55c-.17.01-.32.03-.48.03zM15.93 2.91c-.77 0-1.44.48-2.12 1.2l-8.21 8.7c-.2.21-.43.71-.47 1l-.37 3.24c-.04.33.04.6.22.77.18.17.45.23.78.18l3.22-.55c.29-.05.77-.31.97-.52l8.21-8.69C19.4 6.92 19.85 5.7 18.04 4c-.8-.77-1.49-1.09-2.11-1.09z'/><path fill='white' d='M17.34 10.95h-.07a6.86 6.86 0 0 1-6.11-5.78c-.06-.41.22-.79.63-.86.41-.06.79.22.86.63a5.372 5.372 0 0 0 4.78 4.52c.41.04.71.41.67.82-.05.38-.38.67-.76.67zM21 22.75H3c-.41 0-.75-.34-.75-.75s.34-.75.75-.75h18c.41 0 .75.34.75.75s-.34.75-.75.75z'/></svg>");
}

.reverse-check-btn::before {
  background-image: url("data:image/svg+xml;utf8,<svg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'><path fill='white' d='M10.79 15.17a.75.75 0 0 1-.53-.22l-2.42-2.42a.754.754 0 0 1 0-1.06c.29-.29.77-.29 1.06 0l1.89 1.89 4.3-4.3c.29-.29.77-.29 1.06 0 .29.29.29.77 0 1.06l-4.83 4.83a.75.75 0 0 1-.53.22z'/><path fill='white' d='M12 22.75c-.63 0-1.26-.21-1.75-.63l-1.58-1.36c-.16-.14-.56-.28-.77-.28H6.18A2.68 2.68 0 0 1 3.5 17.8v-1.71c0-.21-.14-.6-.28-.76l-1.35-1.59c-.82-.97-.82-2.5 0-3.47l1.35-1.59c.14-.16.28-.55.28-.76V6.2c0-1.48 1.2-2.68 2.68-2.68h1.73c.21 0 .61-.15.77-.28l1.58-1.36c.98-.84 2.51-.84 3.49 0l1.58 1.36c.16.14.56.28.77.28h1.7c1.48 0 2.68 1.2 2.68 2.68v1.7c0 .21.15.61.29.77l1.36 1.58c.84.98.84 2.51 0 3.49l-1.36 1.58c-.14.16-.29.56-.29.77v1.7c0 1.48-1.2 2.68-2.68 2.68h-1.7c-.21 0-.61.15-.77.28l-1.58 1.36c-.49.43-1.12.64-1.75.64zM6.18 5.02C5.53 5.02 5 5.55 5 6.2v1.71c0 .57-.27 1.3-.64 1.73l-1.35 1.59c-.35.41-.35 1.12 0 1.53l1.35 1.59c.37.44.64 1.16.64 1.73v1.71c0 .65.53 1.18 1.18 1.18h1.73c.58 0 1.31.27 1.75.65l1.58 1.36c.41.35 1.13.35 1.54 0l1.58-1.36c.44-.37 1.17-.65 1.75-.65h1.7c.65 0 1.18-.53 1.18-1.18v-1.7c0-.58.27-1.31.65-1.75L21 12.76c.35-.41.35-1.13 0-1.54l-1.36-1.58c-.38-.44-.65-1.17-.65-1.75V6.2c0-.65-.53-1.18-1.18-1.18h-1.7c-.58 0-1.31-.27-1.75-.65l-1.58-1.36c-.41-.35-1.13-.35-1.54 0L9.66 4.38c-.44.37-1.18.64-1.75.64H6.18z'/></svg>");
}

/* 按钮悬停效果 */
.reverse-check-btn:hover,
.copy-btn:hover,
.edit-btn:hover {
  background-color: #007bff;
  transform: scale(1.25);
  box-shadow: 0 0 8px rgba(0, 0, 0, 0.8);
  transition: all 0.2s ease;
}

/* 按钮基础样式 */
.copy-btn,
.edit-btn,
.reverse-check-btn {
  background-color: #555;
}

/* 按钮激活状态样式 */
.copy-btn.copied,
.edit-btn.edited,
.reverse-check-btn.checked {
  background-color: #28a745;
}

/* 当 AI 消息气泡有校验结果时，隐藏校验按钮 */
.ai-message.has-reverse-check .reverse-check-btn {
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
}

.reverse-check-result {
  margin-top: 5px;
  padding: 5px 8px;
  background-color: #555;
  border-radius: 8px;
  font-size: 0.8em;
  color: #ddd;
}

/* 底部输入区域整合 */
.input-area {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  display: flex;
  flex-direction: column;
  padding: 10px;
  background-color: rgba(26, 26, 26, 0.75);
  border-top: 1px solid #333;
  z-index: 10;
}

.input-area:focus-within {
  border-color: #999;
}

textarea {
  width: 100%;
  min-height: 60px;
  /* 初始高度 */
  max-height: 120px;
  /* 最大高度，约等于初始高度的两倍 */
  padding: 10px;
  margin-bottom: 10px;
  border-radius: 12px;
  border: 1px solid #1a1a1a;
  background-color: rgba(26, 26, 26, 0.5);
  color: #e0e0e0;
  resize: none;
  font-family: inherit;
  /* 明确继承字体 */
  font-size: 1.2em;
  line-height: 1.3em;
  box-sizing: border-box;
}

textarea:focus {
  outline: none;
}

/* 隐藏和美化滚动条 */
/* 适用于 Chrome, Safari */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: #2a2a2a;
}

::-webkit-scrollbar-thumb {
  background: #555;
  border-radius: 10px;
}

::-webkit-scrollbar-thumb:hover {
  background: #777;
}

.controls {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.controls label {
  display: flex;
  align-items: center;
  font-size: 0.9em;
  cursor: pointer;
}

.controls input[type="checkbox"] {
  margin-right: 5px;
  -webkit-appearance: none;
  appearance: none;
  width: 16px;
  height: 16px;
  border: 1px solid #555;
  border-radius: 4px;
  background-color: #1a1a1a;
  position: relative;
  cursor: pointer;
}

.controls input[type="checkbox"]:checked {
  background-color: #007bff;
  border-color: #007bff;
}

.controls input[type="checkbox"]:checked::after {
  content: '✔';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: #fff;
  font-size: 12px;
}

button {
  background-color: #007bff;
  color: white;
  border: none;
  border-radius: 8px;
  padding: 10px 15px;
  cursor: pointer;
  font-size: 0.95em;
  transition: background-color 0.2s ease;
}

button:hover {
  background-color: #0056b3;
}

button:active {
  background-color: #004085;
}

/* 自定义多选下拉菜单样式 */
.custom-select-trigger {
  background-color: #333;
  color: #e0e0e0;
  border: 1px solid #555;
  border-radius: 8px;
  padding: 8px;
  font-size: 0.9em;
  cursor: pointer;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: 38px;
}

.custom-select-trigger::after {
  content: '';
  position: absolute;
  right: 8px;
  top: 50%;
  transform: translateY(-50%) rotate(45deg);
  width: 8px;
  height: 8px;
  border-bottom: 2px solid #e0e0e0;
  border-right: 2px solid #e0e0e0;
  transition: transform 0.2s ease;
}

.custom-select-trigger.open::after {
  transform: translateY(-50%) rotate(-135deg);
}

.custom-select-options {
  display: none;
  position: absolute;
  background-color: #333;
  border: 1px solid #555;
  border-radius: 8px;
  max-height: 200px;
  overflow-y: auto;
  z-index: 1000;
  width: calc(100% - 20px);
  margin-top: 5px;
  padding: 5px 0;
}

.custom-select-options.open {
  display: block;
}

.custom-select-option {
  display: flex;
  align-items: center;
  padding: 8px 10px;
  cursor: pointer;
  white-space: nowrap;
}

.custom-select-option:hover {
  background-color: #444;
}

.custom-select-option input[type="checkbox"] {
  margin-right: 8px;
  -webkit-appearance: none;
  appearance: none;
  width: 16px;
  height: 16px;
  border: 1px solid #777;
  border-radius: 4px;
  background-color: #222;
  position: relative;
  cursor: pointer;
}

.custom-select-option input[type="checkbox"]:checked {
  background-color: #007bff;
  border-color: #007bff;
}

.custom-select-option input[type="checkbox"]:checked::after {
  content: '✔';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: #fff;
  font-size: 10px;
}

.custom-select-option.disabled {
  opacity: 0.5;
  cursor: not-allowed;
  background-color: transparent;
}

.custom-select-option.disabled:hover {
  background-color: transparent;
}

/* 新增的选项页面样式 */
.options-container {
  max-width: calc(80% - 20px);
  margin: 20px auto;
  padding: 20px;
  border-radius: 12px;
  background-color: #2a2a2a;
}

/* 统一输入框样式，使其更长 */
.input-group input[type="text"] {
  width: 95%;
  min-width: 200px;
  box-sizing: border-box;
}

/* 优化按钮样式，使其不占满宽度 */
.save-btn {
  width: calc(60%);
  min-width: 120px;
  padding: 10px 20px;
  font-weight: bold;
  cursor: pointer;
  background-color: #555;
  color: #e0e0e0;
  border: 1px solid #777;
  border-radius: 8px;
  transition: background-color 0.2s ease;
  margin-top: 15px;
}

.save-btn:hover {
  background-color: #666;
}

/* 调整状态信息样式 */
#status {
  margin-top: 15px;
  padding: 10px;
  border-radius: 8px;
  font-weight: bold;
  text-align: center;
}

.success {
  background-color: #4CAF50;
  color: white;
}

.error {
  background-color: #f44336;
  color: white;
}

/* 选项页面文字可读性优化 */
.options-container h1 {
  font-size: 2.0em;
}

.options-container p,
.options-container label {
  font-size: 1.2em;
  line-height: 2.0;
  display: block;
  /* 确保label独占一行，解决错位 */
  margin-bottom: 5px;
  /* 增加label与输入框的间距 */
  width: 100%;
  /* 确保label不会被压缩 */
  box-sizing: border-box;
}

/* 统一输入框的字体大小 */
.options-container input,
.options-container select {
  font-size: 1.1em;
  line-height: 1.4;
  margin-bottom: 15px;
  /* 增加输入框之间的间距 */
}

/* 新增: 让保存按钮居中 */
.options-container button {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

/* 新增: 让下拉选择框宽度加宽 */
#providerSelect {
  width: 60%;
}

/* 新增：按钮组布局 */
.button-group {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin-top: 25px;
}

/* 重新定义测试按钮样式为蓝色 */
.test-btn {
  width: auto;
  min-width: 120px;
  padding: 10px 20px;
  font-weight: bold;
  cursor: pointer;
  background-color: #007bff;
  /* 默认蓝色 */
  color: white;
  border: 1px solid #007bff;
  /* 蓝色边框 */
  border-radius: 8px;
  transition: background-color 0.2s ease, border-color 0.2s ease;
}

.test-btn:hover {
  background-color: #0056b3;
  /* 鼠标悬停时变深 */
  border-color: #0056b3;
}

/* 调整保存按钮的居中样式，因为现在它在 flex 容器中 */
.save-btn {
  width: auto;
  min-width: 120px;
  padding: 10px 20px;
  font-weight: bold;
  cursor: pointer;
  border: 1px solid #777;
  border-radius: 8px;
  transition: background-color 0.2s ease, border-color 0.2s ease;
  margin: 0;
  /* 移除原来的 margin */
}

/* 保存按钮默认禁用样式 (灰色) */
.save-btn.disabled-btn {
  background-color: #555;
  border-color: #777;
  color: #e0e0e0;
  cursor: not-allowed;
}

/* 保存按钮可用样式 (蓝色，与消息界面一致) */
.save-btn.enabled-btn {
  background-color: #007bff;
  border-color: #007bff;
  color: white;
  cursor: pointer;
}

.custom-select-option.disabled {
  opacity: 0.5;
  cursor: not-allowed;
  background-color: #222;
}

.custom-select-option.disabled label,
.custom-select-option.disabled input[type="checkbox"] {
  cursor: not-allowed;
}